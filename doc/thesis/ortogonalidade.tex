\chapter{Padrões Freqüentes e Ortogonais}
\label{chapter:ortogonalidade}

Como já foi mencionado na seção \ref{sec:introducao_padroes}, padrões freqüentes são largamente utilizados em diversas aplicações da mineração de dados, incluindo regras de associação, classificação , agrupamento, indexação, dentre outras. Encontra-se, na literatura, uma grande quantidade de algoritmos de mineração de padrões freqüentes que, para muitas aplicações, produzem resultados satisfatórios (como os apresentados na seção \ref{sec:introducao_trabalhos}). Entretanto, este problema ainda não foi totalmente resolvido.
\par
Uma das razões que contribuem para este fato é que, de acordo com a definição, qualquer sub-conjunto de um padrão freqüente também é freqüente, o que faz com que o tamanho do conjunto-solução do algoritmo cresça de maneira explosiva. A introdução de conceitos como padrões fechados ou padrões maximais ajudou a resolver este problema, porém, as abordagens existentes minimizam o conjunto-solução apenas sob a perspectiva do suporte, não considerando a semântica dos dados, o que pode fazer com que padrões interessantes ao usuário sejam retirados da solução durante o processo de minimização do resultado.
\par
Outro desafio que ainda persiste na mineração de padrões freqüentes é a eliminação de redundância nos resultados obtidos. Em muitas aplicações encontramos a necessidade de extrair um pequeno conjunto de padrões freqüentes que tenham, não só alta significância, mas também baixa redundância. A significância é, em geral, definida pelo contexto da aplicação. De acordo com \cite{DBLP:conf/kdd/XinCYH06}, alguns estudos recentes têm se concentrado em como extrair top-$k$ padrões com alta significância, e outros em como remover redundância entre padrões.
\par
O objetivo da aplicação de ortogonalidade na mineração de padrões freqüentes é desenvolver uma técnica capaz de extrair um sub-conjunto de padrões com alta significância e baixa redundância entre seus elementos.
\par
%Como já foi mencionado no capítulo \ref{chapter:classificacao}, encontra-se, na literatura, diversos trabalhos relacionados com classificação, explorando o problema das mais variadas maneiras, e apresentando modelos diferentes, capazes de se adaptar aos diversos tipos de aplicações existentes.
%\par
%Paralelamente, a ortogonalidade tem aparecido, em alguns dos últimos trabalhos de mineração de dados, como uma forma de se resolver problemas de redundância em conjuntos de padrões freqüentes extraídos de determinada base de dados.
%\par
%A utilização de ortogonalidade para se diminuir a redundância dos conjuntos de padrões utilizados na geração de regras associativas aparece como uma possível forma de se melhorar a eficácia de tais classificadores. Assim, surge a motivação para a aplicação de métricas de ortogonalidade entre padrões no modelo de classificação associativa.
%\par
%Este capítulo apresenta as informações relacionadas à nova abordagem de classificação associativa proposta. Na seção \ref{sec:ortogonalidade_metricas} serão apresentadas as métricas de ortogonalidade exploradas, na seção \ref{sec:ortogonalidade_estrategias} serão discutidas as estratégias de aplicação das métricas. A seção \ref{sec:ortogonalidade_classificacao} possui uma discussão sobre as formas como a ortogonalidade foi utilizada dentro do modelo de classificação, e a seção \ref{sec:ortogonalidade_origami} apresenta a estratégia ORIGAMI e adaptação desenvolvida para o problema de classificação.
 
\section{Métricas de Ortogonalidade}
\label{sec:ortogonalidade_metricas}

Para se extrair um sub-conjunto de padrões de alta significância e baixa redundância do conjunto original de padrões freqüentes, é preciso definir métricas que possibilitem a avaliação dos vários conjuntos-solução possíveis. Em \cite{DBLP:conf/kdd/XinCYH06} os autores utilizam, em seus experimentos, o coeficiente de \textbf{Jaccard} \citep{jain88} aplicado à cobertura da base de dados para se obter uma medida de distância entre dois padrões: \[D(p_1,p_2) = 1 - \frac{|TS(p_1) \cap TS(p_2)|}{|TS(p_1) \cup TS(p_2)|},\] onde $TS(p_1)$ é o conjunto de transações cobertas pelo padrão $p_1$.
\par
Em \cite{zaki07origami} os autores discutem diferentes métricas de similaridade entre grafos, incluindo, além do coeficiente de Jaccard: \[sim(G_a, G_b) = \frac{|t(G_a) \cap t(G_b)|}{|t(G_a) \cup t(G_b)|},\] uma métrica de distância para grafos baseada no máximo sub-grafo comum \citep{bunke98}: \[sim_{mc}(G_1, G_2) = \frac{|G_{mc}|}{max(|G_1|,|G_2|)},\] onde $G_{mc}$ é o maior sub-grafo comum entre $G_1$ e $G_2$.
\par
A principal características destas métricas é que elas foram desenvolvidas para pares de padrões, e não para conjuntos de padrões. No nosso caso, estamos interessados em métricas que definem a ortogonalidade de conjuntos. Nas próximas sub-seções apresentaremos três métricas de ortogonalidade propostas e indicadas para o problema da classificação associativa.

%A aplicação da ortogonalidade no modelo de classificação associativa tem como principal objetivo a diminuição de redundância no conjunto de regras geradas durante a fase de treinamento. Para tanto, podem ser  naO objetivo da ortogonalidade é diminuir o número de padrões utilizados para gerar as regras de associação. Logo, a sua utilização ....

\subsection{Similaridade entre Padrões}
\label{sec:ortogonalidade_metricas_similaridade}

Considerando a estrutura dos padrões, dizemos que dois padrões são ortogonais se eles não possuem itens em comum. Dessa forma, pode-se dizer que os padrões $ABC$ e $DEF$ são ortogonais, mas $ABC$ e $CDE$ não são, já que o item $C$ está presente nos dois padrões. O mesmo pode ser aplicado para conjuntos maiores de padrões, por exemplo, os padrões $AB$, $CD$ e $EF$ são ortogonais, mas os padrões $AB$, $BC$ e $CD$ não são.
\par
Entretanto, a simples informação de um determinado conjunto de padrões é ortogonal ou não é insuficiente para que a possível solução seja avaliada. É preciso desenvolver uma métrica que forneça uma medida contínua de ortogonalidade.
\par
Uma forma de se obter esta medida, é analisar os itens dos padrões. Sabemos que dois padrões são ortogonais se eles não compartilham itens, ou seja, a presença de um mesmo item em mais de um padrão do conjunto deve diminuir a medida de ortogonalidade do mesmo.
\par
Assim, para cada item $i$, pertencente a, pelo menos, um dos padrões do conjunto, é dado um peso \[w_i = \frac{p-k}{p-1},\] onde $k$ é o número de padrões do conjunto que contém o item $i$. De acordo com esta expressão, se o conjunto possui quatro padrões, e um item $i$ está presente em apenas um deles, o seu peso $w_i$ é $1$. Se o item está presente em $3$ padrões do conjunto, o peso $w_i$ é $\frac{1}{3}$. Itens compartilhados por todos os padrões têm peso igual a $0$.
\par
Considerando que existam $I$ itens distintos em todo o conjunto de padrões, a ortogonalidade do conjunto é dada pela expressão: \[\frac{\sum_i w_i}{I}.\]
\par
TODO: inserir um exemplo aqui.
%Dois padrões são similares se possuem itens em comum, logo, dois padrões são ortogonais se não possuem itens em comum. Mostrar exemplo: AB e CD são mais ortogonais que AB e BC. Fazer figura do exemplo.

\subsection{Cobertura de Transações}
\label{sec:ortogonalidade_metricas_transacoes}

Considerando o espaço de transações, dizemos que dois padrões são ortogonais se eles cobrem áreas diferentes da base de dados, ou seja, se não existem sobreposições nas coberturas de cada padrão do conjunto.
\par
Na figura \ref{fig:covex1} temos uma representação de uma base de dados, e os conjuntos de transações cobertas por três padrões ($X$, $Y$ e  $Z$). As transações que fazem parte das áreas $T_X$, $T_Y$ e $T_Z$ são cobertas por apenas um dos padrões ($X$, $Y$ e $Z$ respectviamente). As transações de $T_{XY}$ são cobertas por $X$ e $Y$, e as transações de $T_{XYZ}$ são cobertas pelos três padrões do exemplo. Se precisamos de padrões que cobrem diferentes áreas da base de dados, então nós estamos interessados em maximizar $T_X$, $T_Y$ e $T_Z$, neste caso.

\begin{figure}
\centering
\includegraphics[width=0.4\textwidth]{img/coverage}
\caption{Orthogonality by Coverage}
\label{fig:covex1}
\end{figure}

A métrica de cobertura de transações pode ser calculada de maneira análoga à relacionada métrica de similaridade entre padrões, sendo que, neste caso, os elementos que possuem pesos a serem calculados são as transações cobertas pelos padões, e não os seus itens.
\par
Consideramos que cada transação $t$, coberta por, pelo menos, um dos $p$ padrões do conjunto, possui um peso, e este peso é dado por: \[w_t = \frac{p - k}{p - 1},\] onde $k$ é o número de padrões que cobrem a transação $t$. De acordo com esta expressão, se nós temos 4 padrões, e uma transação $t$ é coberta por apenas um deles, então o seu peso $w_t$ será $1$. Se esta transação é coberta por dois padrões do conjunto, o valor de $w_t$ será $\frac{1}{2}$. As transações cobertas por todos os padrões do conjunto terão peso igual a $0$.
\par
Dada esta expressão para se calcular o peso de cada transação, podemos, agora, calcular a medida de ortogonalidade do conjunto de padrões. Considerando que temos $T$ transações distintas e cobertas pelos padrões, a medida de ortogonalidade do conjunto é dada por: \[\frac{\sum_t w_t}{T}.\]
\par
TODO: inserir um exemplo aqui.

\subsection{Cobertura de Classes}
\label{sec:ortogonalidade_metricas_classes}

As duas métricas de ortogonalidade apresentadas nas seções \ref{sec:ortogonalidade_metricas_similaridade} e \ref{sec:ortogonalidade_metricas_transacoes} estão relacionadas apenas com os padrões e as transações da base, e podem ser utilizadas em qualquer tipo de aplicação. Já a métrica apresentada nesta seção é voltada diretamente para o problema da classificação, pois está relacionada às classes das transações cobertas pelos padrões do conjunto.
\par
Dois padrões são ortogonais se são encontrados em transações de classes distintas na base de dados, ou seja, o conjunto de transações cobertas por cada um dos padrões não devem possuir classes em comum.
\par
A métrica de cobertura de classes pode ser calculada de maneira análoga às relacionadas métricas de similaridade entre padrões e cobertura de transações, sendo que, neste caso, os elementos que possuem pesos a serem calculados são as classes existentes nas transações cobertas pelos padrões.
\par
Consideramos que cada classe $c$, que aparece em transações cobertas por, pelo menos, um dos $p$ padrões do conjunto acima de $90\%$ da média esperada, possui um peso, e este peso é dado por: \[w_c = \frac{p - k}{p - 1},\] onde $k$ é o número de padrões que cobrem uma quantidade de transações da classe $c$ maior que o esperado. De acordo com esta expressão, se nós temos 4 padrões, e uma classe $c$ que aparece em transações cobertas por apenas um deles, então o seu peso $w_c$ será $1$. Se esta classe aparece em transações coberta por dois padrões do conjunto de maneira balanceada (por exemplo, se a classe aparece em $50\%$ das transações cobertas por cada padrão), o valor de $w_c$ será $\frac{1}{2}$. As classes que aparecem por igual em transações cobertas por todos os padrões do conjunto terão peso igual a $0$.
\par
Dada esta expressão para se calcular o peso de cada classe, podemos, agora, calcular a medida de ortogonalidade do conjunto de padrões. Considerando que temos $C$ classes distintas que aparecem em transações cobertas pelos padrões, a medida de ortogonalidade do conjunto é dada por: \[\frac{\sum_c w_c}{C}.\]
\par
TODO: pensar num exemplo com figura.

\section{Estratégias de Ortogonalidade}
\label{sec:ortogonalidade_estrategias}

Após a introdução das métricas, é necessário definir como elas serão utilizadas para se obter a medida de ortogonalidade do conjunto. Na literatura, encontramos algumas estratégias interessantes.
\par
Em \cite{zaki07origami}, a métrica de ortogonalidade só é aplicada a pares de padrões, e os autores optaram por utilizar como valor de ortogonalidade do conjunto a medida da ortogonalidade entre os dois elementos mais similares deste conjunto.
\par
Em \cite{DBLP:conf/kdd/XinCYH06} os autores optaram por construir métricas de significância aplicáveis a padrões e métricas de redundância aplicáveis a pares de padrões. O valor da função que compreende as duas métricas é obtido pela soma das significâncias de cada padrão do conjunto menos a média das redundâncias existentes entre cada par de padrões.
\par
Neste trabalho, duas soluções foram implementadas. A primeira delas é a ortogonalidade por conjunto, onde aplicamos as métricas de ortogonalidade apresentadas na seção \ref{sec:ortogonalidade_metricas} considerando todo o conjunto solução. A segunda é baseada na solução proposta por \cite{DBLP:conf/kdd/XinCYH06} - as métricas são aplicadas somente a pares de padrões, e a ortogonalidade do conjunto é obtida por meio da média das ortogonalidades de cada par.
\par
É fácil perceber que as três métricas propostas na seção \ref{sec:ortogonalidade_metricas} são equivalentes ao coeficiente de Jaccard quando aplicadas a conjuntos de dois padrões. Tomando, como exemplo, a métrica de similaridade entre padrões, temos que a ortogonalidade do conjunto é dada pela expressão: \[\frac{\sum_i(\frac{p-k}{p-1})}{I}.\]
Nos casos em que os conjuntos possuem necessariamente dois padrões: \[\frac{\sum_i(2-k)}{I},\] onde $k$ é o número de padrões que possuem o item $i$. Analisando a expressão acima, temos que $I$ corresponde ao tamanho do conjunto de itens encontrados nos dois padrões, ou seja, \[I = |p_1| \cup |p_2|,\] onde $|p_1|$ é o tamanho do padrão $p_1$, e a parcela $(2-k)$ terá valor $1$ para itens que estão presentes em apenas um padrão, e $2$ para itens presentes nos dois padrões, ou seja, \[\sum_i(2-k) = |p_1| \cap |p_2|.\]

%Breve introdução, falar sobre métricas utilizadas por \cite{DBLP:conf/kdd/XinCYH06} e \cite{zaki07origami}.

%\subsection{Ortogonalidade por conjunto}

%Apresentar e discutir as expressões: \\
%Similaridade: Expressão que dá um peso para cada item encontrado nos padrões do conjunto; \\
%Cobertura de Transações: Expressão que dá um peso para cada transação coberta pelo conjunto de padrões; \\
%Cobertura de Classes: Expressão que dá um peso para cada classe encontrada nas transações cobertas pelos padrões.

%\subsection{Ortogonalidade Par-a-par}

%Discutir as expressões par a par (similaridade pode ser dada por interseção sobre união de elementos, ortogonalidade pode ser dada por 1 - similaridade): \\
%Ortogonalidade por itens: Quantidade de itens que aparecem em apenas um dos padrões / quantidade de itens que aparecem nos dois padrões. \\
%Ortogonalidade por cobertura de transações: Quantidade de transações cobertas por apenas um dos padrões / quantidade de transações cobertas pelos dois padrões. \\
%Ortogonalidade por cobertura de classes: Mais complicado: Ortogonalidade é a média das razões entre a diferença das coberturas e a maior cobertura de cada classe. 

\section{Classificação e Ortogonalidade}
\label{sec:ortogonalidade_classificacao}

Falar sobre como utilizar o conceito de ortogonalidade em algoritmos de regras de associação: \\
Ortogonalidade por itens: Motivação: Encontrar um conjunto de padrões ortogonais que representem bem todo o conjunto de padrões frequentes, e que gere regras não redundantes; \\
Ortogonalidade por cobertura de transações: Encontrar um conjunto de padrões que cubram áres ortogonais, e dessa forma, distintas da base de dados, diminuindo a redundância de informações durante a geração das regras, e mais que isso, diminuindo a possibilidade de encontrar regras redundantes; \\
Ortogonalidade por cobertura de classes: Encontrar um conjunto de padrões que aparecem em transações de classes distintas, ou seja, padrões que apontam para classes distintas. A idéia é gerar regras não redundantes, e obter a classificação das regras de maior peso no ranking.

\subsection{Utilização de Ortogonalidade no LAC}

O lazy cria uma projeção da base a partir dos itens encontrados na transação a ser classificada, e obtém padrões frequentes formados por estes itens. \\
A ortogonalidade pode entrar de várias maneiras no lazy, por exemplo, é possível obter, apriori, o cojunto de itens ortogonais da base de dados, e, para cada transação a ser classificada, obter a projeção apenas dos items ortogonais. \\
A forma escolhida neste trabalho foi continuar utilizando todos os itens para gerar a projeção, obter o conjunto de padrões frequentes e, deste conjunto, obter um conjunto de padrões ortogonais, com o qual serão geradas as regras de associação.

\subsection{Heurística de Obtenção de Conjuntos Ortogonais}

Falar da heurística:

\begin{enumerate}
	\item O conjunto de padrões é ordenado de forma decrescente quanto ao tamanho dos padrões;
	\item O primeiro padrão é adicionado ao conjunto solução;
	\item Um novo padrão é adicionado ao conjunto;
	\item Todo o conjunto de padrões que ainda não fazem parte do conjunto solução é percorrido, na tentativa de se melhorar a solução;
	\item Ao final da lista, se a solução não piorou, o conjunto se mantém, e o algoritmo tenta obter um conjunto maior. Se a solução piorou, o algoritmo para, e a solução anterior é retornada.
\end{enumerate}

Falar das formas de ordenar o conjunto, falar do comportamento do algoritmo para cada caso (similaridade, transações e classes).

\section{Estratégia ORIGAMI}
\label{sec:ortogonalidade_origami}

Falar sobre o ORIGAMI \cite{zaki07origami}.

\subsection{Definição de alfa-ortogonalidade}

Falar das vantagens de alfa e beta.

\subsection{Estratégia de Ortogonalidade (algoritmo)}

Falar da estratégia aleátória, das métricas, mostrar o algoritmo.

\subsection{Adaptação do algoritmo}

Falar da adaptação do ORIGAMI ao problema de classificação, da utilização das 3 métricas.